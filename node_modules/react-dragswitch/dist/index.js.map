{"version":3,"file":"index.js","sources":["../src/ToggleSwitch.tsx","../src/DragSwitch.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport styles from './ToggleSwitch.module.css'\n\ninterface Props {\n\tclassName?: string\n\tchecked: boolean\n\tonChange: (checked: boolean) => void\n\tonColor?: string\n\toffColor?: string\n\thandleColor?: string\n\tfocusShadow?: string\n\tdisabled?: boolean\n\t[props: string]: any\n}\n\nconst ToggleSwitch = ({\n\tclassName,\n\tchecked,\n\tonChange,\n\tonColor,\n\toffColor,\n\thandleColor,\n\tfocusShadow,\n\tdisabled,\n\t...labelProps\n}: Props) => {\n\tconst [hasOutline, setOutline] = useState(false)\n\tconst [lastMouseUpTime, setMouseUpTime] = useState(0)\n\n\tconst handleChange = () => {\n\t\tonChange(!checked)\n\t}\n\n\tconst onMouseUp = () => {\n\t\tsetMouseUpTime(Date.now())\n\t}\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('mouseup', onMouseUp)\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('mouseup', onMouseUp)\n\t\t}\n\t}, [])\n\n\treturn (\n\t\t<label\n\t\t\tstyle={{\n\t\t\t\tcursor: disabled ? 'not-allowed' : 'pointer',\n\t\t\t\tfilter: disabled ? 'brightness(0.9)' : 'unset'\n\t\t\t}}\n\t\t\t{...labelProps}\n\t\t\tclassName={`${styles.switch} ${className || ''}`}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={`${styles.switchBg} ${checked ? styles.isChecked : ''}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: checked\n\t\t\t\t\t\t? onColor || '#66bb6a'\n\t\t\t\t\t\t: offColor || '#cccccc'\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tid='dragswitch-handle'\n\t\t\t\tclassName={`${styles.switchHandle} ${checked ? styles.isChecked : ''}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tWebkitTransition: 'transform .2s',\n\t\t\t\t\tMozTransition: 'transform .2s',\n\t\t\t\t\ttransition: 'transform .2s',\n\t\t\t\t\tboxShadow: hasOutline\n\t\t\t\t\t\t? focusShadow || 'rgba(0,0,0,0.5) 0px 0px 2px 3px'\n\t\t\t\t\t\t: undefined,\n\t\t\t\t\tbackgroundColor: handleColor || '#ffffff'\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\trole='switch'\n\t\t\t\taria-checked={checked}\n\t\t\t\ttype='checkbox'\n\t\t\t\tdefaultChecked={checked}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonFocus={() => {\n\t\t\t\t\t// prevent focus after user clicked switch, allows keyboard to focus switch\n\t\t\t\t\tif (Date.now() - lastMouseUpTime > 25) setOutline(true)\n\t\t\t\t}}\n\t\t\t\tonBlur={() => {\n\t\t\t\t\tsetOutline(false)\n\t\t\t\t}}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tclassName={styles.switchInput}\n\t\t\t/>\n\t\t</label>\n\t)\n}\n\nexport default ToggleSwitch\n","import React, { useRef, useState, useEffect } from 'react'\nimport styles from './ToggleSwitch.module.css'\n\ninterface Props {\n\tclassName?: string\n\tchecked: boolean\n\tonChange: (checked: boolean) => void\n\tonColor?: string\n\toffColor?: string\n\thandleColor?: string\n\tfocusShadow?: string\n\tdisabled?: boolean\n\t[props: string]: any\n}\n\nconst DragSwitch = ({\n\tclassName,\n\tchecked,\n\tonChange,\n\tonColor,\n\toffColor,\n\thandleColor,\n\tfocusShadow,\n\tdisabled,\n\t...labelProps\n}: Props) => {\n\tconst switchRef = useRef<HTMLLabelElement>(null)\n\tconst [Xpos, setPos] = useState(checked ? 20 : 0)\n\tconst [isMouseDown, setMouseDown] = useState(false)\n\tconst [lastMouseUpTime, setMouseUpTime] = useState(0)\n\tconst [hasOutline, setOutline] = useState(false)\n\tconst [dragging, setDragging] = useState(false)\n\tconst [dragEnd, setDragEnd] = useState(0)\n\n\tconst handleChange = () => {\n\t\t// prevent setting checked if user was just dragging\n\t\tif (Date.now() - dragEnd > 25) {\n\t\t\thandleChecked(!checked)\n\t\t}\n\t}\n\n\tconst handleChecked = (newChecked: boolean) => {\n\t\tif (newChecked) {\n\t\t\tsetPos(20)\n\t\t} else {\n\t\t\tsetPos(0)\n\t\t}\n\n\t\tif (newChecked !== checked) onChange(newChecked)\n\t}\n\n\tconst startDrag = (e: React.MouseEvent) => {\n\t\te.preventDefault()\n\n\t\tsetMouseDown(true)\n\t\tsetOutline(true)\n\t}\n\n\tconst onMouseUp = (e: MouseEvent) => {\n\t\tsetMouseDown(false)\n\t\tsetOutline(false)\n\t\tsetMouseUpTime(Date.now())\n\n\t\tif (switchRef.current && dragging) {\n\t\t\tconst mouseRelativePos =\n\t\t\t\te.clientX - switchRef.current.getBoundingClientRect().left\n\n\t\t\tsetDragEnd(Date.now())\n\t\t\tsetDragging(false)\n\n\t\t\tif (mouseRelativePos >= 20) {\n\t\t\t\thandleChecked(true)\n\t\t\t} else {\n\t\t\t\thandleChecked(false)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onMouseMove = (e: MouseEvent) => {\n\t\tif (isMouseDown && !dragging) {\n\t\t\tsetDragging(true)\n\t\t}\n\n\t\tif (switchRef.current && dragging) {\n\t\t\tconst halfHandle = 8\n\t\t\tconst newPos =\n\t\t\t\te.clientX - switchRef.current.getBoundingClientRect().left - halfHandle\n\n\t\t\tif (newPos < 0) {\n\t\t\t\tsetPos(0)\n\t\t\t} else if (newPos > 20) {\n\t\t\t\tsetPos(20)\n\t\t\t} else {\n\t\t\t\tsetPos(newPos)\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\t// onMouseMove function relies on dragging and isMouseDown state\n\t\twindow.addEventListener('mousemove', onMouseMove)\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('mousemove', onMouseMove)\n\t\t}\n\t}, [dragging, isMouseDown])\n\n\tuseEffect(() => {\n\t\t// onMouseUp function relies on dragging state when setting value\n\t\twindow.addEventListener('mouseup', onMouseUp)\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('mouseup', onMouseUp)\n\t\t}\n\t}, [dragging])\n\n\treturn (\n\t\t<label\n\t\t\tstyle={{\n\t\t\t\tcursor: disabled ? 'not-allowed' : 'pointer',\n\t\t\t\tfilter: disabled ? 'brightness(0.9)' : 'unset'\n\t\t\t}}\n\t\t\t{...labelProps}\n\t\t\tclassName={`${styles.switch} ${className || ''}`}\n\t\t\tref={switchRef}\n\t\t\tonMouseDown={disabled ? undefined : startDrag}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={`${styles.switchBg} ${checked ? styles.isChecked : ''}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: checked\n\t\t\t\t\t\t? onColor || '#66bb6a'\n\t\t\t\t\t\t: offColor || '#cccccc'\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tid='dragswitch-handle'\n\t\t\t\tclassName={`${styles.switchHandle} ${checked ? styles.isChecked : ''}`}\n\t\t\t\tstyle={{\n\t\t\t\t\ttransform: `translateX(${Xpos}px)`,\n\t\t\t\t\tWebkitTransition: dragging ? undefined : 'transform .2s',\n\t\t\t\t\tMozTransition: dragging ? undefined : 'transform .2s',\n\t\t\t\t\ttransition: dragging ? undefined : 'transform .2s',\n\t\t\t\t\tboxShadow: hasOutline\n\t\t\t\t\t\t? focusShadow || 'rgba(0,0,0,0.5) 0px 0px 2px 3px'\n\t\t\t\t\t\t: undefined,\n\t\t\t\t\tbackgroundColor: handleColor || '#ffffff'\n\t\t\t\t}}\n\t\t\t\tonClick={e => {\n\t\t\t\t\te.preventDefault()\n\n\t\t\t\t\tsetOutline(false)\n\t\t\t\t\tif (!disabled) handleChange()\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\trole='switch'\n\t\t\t\taria-checked={checked}\n\t\t\t\ttype='checkbox'\n\t\t\t\tdefaultChecked={checked}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonFocus={() => {\n\t\t\t\t\t// prevent focus after user clicked/dragged switch\n\t\t\t\t\tif (Date.now() - lastMouseUpTime > 25) setOutline(true)\n\t\t\t\t}}\n\t\t\t\tonBlur={() => {\n\t\t\t\t\tsetOutline(false)\n\t\t\t\t}}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tclassName={styles.switchInput}\n\t\t\t/>\n\t\t</label>\n\t)\n}\n\nexport default DragSwitch\n"],"names":["ToggleSwitch","className","checked","onChange","onColor","offColor","handleColor","focusShadow","disabled","labelProps","useState","hasOutline","setOutline","lastMouseUpTime","setMouseUpTime","handleChange","onMouseUp","Date","now","useEffect","window","addEventListener","removeEventListener","React","style","cursor","filter","styles","switchBg","isChecked","backgroundColor","id","switchHandle","WebkitTransition","MozTransition","transition","boxShadow","undefined","role","type","defaultChecked","onFocus","onBlur","switchInput","DragSwitch","switchRef","useRef","Xpos","setPos","isMouseDown","setMouseDown","dragging","setDragging","dragEnd","setDragEnd","handleChecked","newChecked","startDrag","e","preventDefault","current","mouseRelativePos","clientX","getBoundingClientRect","left","onMouseMove","halfHandle","newPos","ref","onMouseDown","transform","onClick"],"mappings":"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"}